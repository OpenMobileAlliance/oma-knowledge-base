import{g as W,j as q,k as C,J as v,K as F,au as M,i as I,h as G,G as H,H as J,o as u,c as f,a as d,n as o,l as e,F as L,r as D,d as j,t as K,C as B,m as T,b as g,I as E,v as P}from"./DzQfWAIF.js";import{_ as Q}from"./Cvo2idX9.js";import{_ as X}from"./eiAHdVaD.js";import{g as Y}from"./BXLmP1Xy.js";import"./DSZtezvh.js";import"./C-v3KzvZ.js";import"./BneCoJRQ.js";import"./Zq0qAx7R.js";import"./BBCY2dnn.js";const x={wrapper:"pl-4 pr-4 pb-10 shadow-xl bg-neutral-100 dark:bg-neutral-900/[0.6] rounded-2xl",inner:"",tags:{title:"title flex flex-wrap justify-center",clear:"mt-3 text-lg px-3 border border-oma-red-500 bg-oma-red-600 hover:bg-oma-red-500 hover:border-oma-red-600 text-white dark:border-oma-red-500 dark:bg-oma-red-600 dark:hover:bg-oma-red-500 dark:hover:border-oma-red-600 dark:text-white rounded-3xl",list:"inline-block overflow-hidden hover:scale-105 duration-200 ease-in-out rounded-3xl text-lg cursor-pointer px-3 mx-2 mt-4 hover:shadow-xl hover:shadow-primary/[0.3] border border-primary dark:text-white dark:border-primary dark:shadow-primary/[0.3]"},header:"",title:"title pt-6 text-3xl font-extrabold text-center dark:text-primary",subtitle:"subtitle pb-6 text-xl font-semibold text-gray-600 dark:text-neutral-500 -mt-8 text-center",text:"text pb-16 text-center font-light dark:text-golden",base:"justify-between flex flex-wrap",gap:"gap-0",default:{}},Z={class:"block xl:flex justify-center"},ee=["onClick"],te={class:"flex justify-center mt-5"},me=W({__name:"sh-list-cards",props:{ui:{default:()=>({})},title:{default:""},subtitle:{default:""},text:{default:""},cols:{default:x.default.cols},class:{default:void 0},description:{default:""},cardID:{},allTags:{}},async setup(z){let h,w;const c=z,{ui:a,attrs:re}=q("sh-list-cards",C(c,"ui"),x,C(c,"class")),m=v(0),_=()=>{m.value=window.innerWidth};F(()=>{m.value=window.innerWidth,window.addEventListener("resize",_)}),M(()=>{window.removeEventListener("resize",_)});const S=I(()=>{const t=c.cols??x.default.cols;return m.value>=1300?["grid",Y.gridCols[t]].join(" "):m.value<640?["grid","grid-cols-1"].join(" "):m.value>640&&m.value<980?["grid","grid-cols-2"].join(" "):["grid","grid-cols-3"].join(" ")}),y=G();[h,w]=H(()=>J(`docs-${y.path}`,()=>E(y.path).findOne())),h=await h,w();const p=v([]),b=v([]),s=v([]),U=async()=>(await E("news/articles").where({cardID:{$in:c.cardID}}).find()).sort((i,n)=>c.cardID.indexOf(i.cardID)-c.cardID.indexOf(n.cardID)),$=()=>{if(p.value.length>0){const t=new Set;p.value.forEach(i=>{var n;(n=i.tags)==null||n.forEach(l=>{l!==null&&l.length>0&&t.add(l)})}),b.value=Array.from(t)}else b.value=[]},A=async()=>{p.value=await U(),$()},N=I(()=>s.value.length===0?p.value:p.value.filter(t=>{var n;let i=!1;return(n=t.tags)==null||n.forEach(l=>{l!==null&&l.length>0&&s.value.includes(l)&&(i=!0)}),i})),V=t=>{s.value.includes(t)?s.value=s.value.filter(i=>i!==t):s.value.push(t)},O=()=>{s.value=[]};return A(),(t,i)=>{const n=P,l=Q,R=X;return u(),f("div",{class:o(e(a).wrapper)},[d("div",{class:o(e(a).inner)},[d("h3",{class:o(e(a).tags.title)},"Tags",2),d("div",Z,[(u(!0),f(L,null,D(e(b),r=>(u(),f("span",{key:r,onClick:k=>V(r),class:o([e(a).tags.list,{"bg-primary-300 border-primary-400 text-neutral-600 dark:bg-primary-700 dark:border-primary-600 dark:hover:shadow-primary/[0.1]":e(s).includes(r)}])},[j(K(r)+" ",1),e(s).includes(r)?(u(),B(n,{key:0,name:"i-line-md:close-circle",dynamic:"",class:"hover:text-gray-500 duration-100"})):T("",!0)],10,ee))),128))]),d("div",te,[e(s).length?(u(),f("button",{key:0,onClick:O,class:o(e(a).tags.clear)},[j(" Clear All "),g(n,{name:"i-line-md:filter-remove-twotone",dynamic:"",class:"animate-pulse"})],2)):T("",!0)])],2),d("div",{class:o(e(a).header)},[d("div",{class:o(e(a).title)},[g(l,{value:t.title},null,8,["value"])],2),d("div",{class:o(e(a).subtitle)},[g(l,{value:t.subtitle},null,8,["value"])],2),d("div",{class:o(e(a).text)},[g(l,{value:t.text},null,8,["value"])],2)],2),d("div",{class:o([e(a).base,e(a).gap,e(S)])},[(u(!0),f(L,null,D(e(N),(r,k)=>(u(),B(R,{key:k,title:r.title,subtitle:r.subtitle,excerpt:r,urlImage:r.urlImage,urlUpperBase:r._path,article:r._path,leftLabel:r.leftLabel,rightLabel:r.rightLabel,centerLabel:r.centerLabel},null,8,["title","subtitle","excerpt","urlImage","urlUpperBase","article","leftLabel","rightLabel","centerLabel"]))),128))],2)],2)}}});export{me as default};
