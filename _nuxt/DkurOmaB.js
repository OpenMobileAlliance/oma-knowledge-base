import{f as O,i as W,j as C,G as v,R as F,av as M,h as D,g as G,D as K,K as H,E as I,o as u,c as p,a as d,n as i,k as e,F as L,r as j,d as B,t as J,A as E,l as T,b as h,q as P}from"./D4yxDw1k.js";import{_ as Q}from"./uQXEDPW4.js";import{_ as X}from"./ATZqys0m.js";import{g as Y}from"./BXLmP1Xy.js";import"./BneCoJRQ.js";const x={wrapper:"pl-4 pr-4 pb-10 shadow-md dark:shadow-none bg-neutral-100 dark:bg-neutral-900/[0.6] rounded-2xl",inner:"",tags:{title:"title flex flex-wrap justify-center",clear:"mt-3 text-lg px-3 border border-oma-red-500 bg-oma-red-600 hover:bg-oma-red-500 hover:border-oma-red-600 text-white dark:border-oma-red-500 dark:bg-oma-red-600 dark:hover:bg-oma-red-500 dark:hover:border-oma-red-600 dark:text-white rounded-3xl",list:"inline-block overflow-hidden hover:scale-105 duration-200 ease-in-out rounded-3xl text-lg cursor-pointer px-3 mx-2 mt-4 hover:shadow-xl hover:shadow-primary/[0.3] border border-primary dark:text-white dark:border-primary dark:shadow-primary/[0.3]"},header:"",title:"title pt-6 text-3xl font-extrabold text-center dark:text-golden",subtitle:"subtitle pb-6 text-xl font-semibold text-gray-600 dark:text-golden/[0.9] -mt-8 text-center",text:"text pb-16 text-center font-light dark:text-golden/[0.8]",base:"justify-between flex flex-wrap",gap:"gap-0",default:{}},Z={class:"block xl:flex justify-center"},ee=["onClick"],te={class:"flex justify-center mt-5"},ie=O({__name:"sh-list-cards",props:{ui:{default:()=>({})},title:{default:""},subtitle:{default:""},text:{default:""},cols:{default:x.default.cols},class:{default:void 0},description:{default:""},cardID:{},allTags:{}},async setup(z){let g,w;const c=z,{ui:a,attrs:re}=W("sh-list-cards",C(c,"ui"),x,C(c,"class")),f=v(0),k=()=>{f.value=window.innerWidth};F(()=>{f.value=window.innerWidth,window.addEventListener("resize",k)}),M(()=>{window.removeEventListener("resize",k)});const A=D(()=>{const t=c.cols??x.default.cols;return f.value>=1300?["grid",Y.gridCols[t]].join(" "):f.value<640?["grid","grid-cols-1"].join(" "):f.value>640&&f.value<980?["grid","grid-cols-2"].join(" "):["grid","grid-cols-3"].join(" ")}),y=G();[g,w]=K(()=>H(`docs-${y.path}`,()=>I(y.path).findOne())),g=await g,w();const m=v([]),b=v([]),n=v([]),S=async()=>(await I("news/articles").where({cardID:{$in:c.cardID}}).find()).sort((l,o)=>c.cardID.indexOf(l.cardID)-c.cardID.indexOf(o.cardID)),U=()=>{if(m.value.length>0){const t=new Set;m.value.forEach(l=>{var o;(o=l.tags)==null||o.forEach(s=>{s!==null&&s.length>0&&t.add(s)})}),b.value=Array.from(t)}else b.value=[]},$=async()=>{m.value=await S(),U()},N=D(()=>n.value.length===0?m.value:m.value.filter(t=>{var o;let l=!1;return(o=t.tags)==null||o.forEach(s=>{s!==null&&s.length>0&&n.value.includes(s)&&(l=!0)}),l})),R=t=>{n.value.includes(t)?n.value=n.value.filter(l=>l!==t):n.value.push(t)},V=()=>{n.value=[]};return $(),(t,l)=>{const o=P,s=Q,q=X;return u(),p("div",{class:i(e(a).wrapper)},[d("div",{class:i(e(a).inner)},[d("h3",{class:i(e(a).tags.title)},"Tags",2),d("div",Z,[(u(!0),p(L,null,j(e(b),r=>(u(),p("span",{key:r,onClick:_=>R(r),class:i([e(a).tags.list,{"bg-primary-300 border-primary-400 text-neutral-600 dark:bg-primary-700 dark:border-primary-600 dark:hover:shadow-primary/[0.1]":e(n).includes(r)}])},[B(J(r)+" ",1),e(n).includes(r)?(u(),E(o,{key:0,name:"i-line-md:close-circle",dynamic:"",class:"hover:text-gray-500 duration-100"})):T("",!0)],10,ee))),128))]),d("div",te,[e(n).length?(u(),p("button",{key:0,onClick:V,class:i(e(a).tags.clear)},[l[0]||(l[0]=B(" Clear All ")),h(o,{name:"i-line-md:filter-remove-twotone",dynamic:"",class:"animate-pulse"})],2)):T("",!0)])],2),d("div",{class:i(e(a).header)},[d("div",{class:i(e(a).title)},[h(s,{value:t.title},null,8,["value"])],2),d("div",{class:i(e(a).subtitle)},[h(s,{value:t.subtitle},null,8,["value"])],2),d("div",{class:i(e(a).text)},[h(s,{value:t.text},null,8,["value"])],2)],2),d("div",{class:i([e(a).base,e(a).gap,e(A)])},[(u(!0),p(L,null,j(e(N),(r,_)=>(u(),E(q,{key:_,title:r.title,subtitle:r.subtitle,excerpt:r,urlImage:r.urlImage,urlUpperBase:r._path,article:r._path,leftLabel:r.leftLabel,rightLabel:r.rightLabel,centerLabel:r.centerLabel},null,8,["title","subtitle","excerpt","urlImage","urlUpperBase","article","leftLabel","rightLabel","centerLabel"]))),128))],2)],2)}}});export{ie as default};
