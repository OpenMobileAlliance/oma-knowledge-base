import{g as R,j as W,k as C,x as h,y as F,ag as M,i as I,h as G,q as H,s as J,o as c,c as f,a as d,n as o,l as e,F as L,r as D,d as j,t as K,I as B,m as T,b as v,v as E,A as P}from"./CyhpkM67.js";import{_ as Q}from"./Wu3WBLFD.js";import{_ as X}from"./Ctnyh33S.js";import{g as Y}from"./BXLmP1Xy.js";import"./Dka5aRvu.js";import"./C-v3KzvZ.js";import"./BneCoJRQ.js";import"./CTk16gMc.js";import"./D3w85B7o.js";const x={wrapper:"pl-4 pr-4 pb-10 shadow-xl bg-neutral-100 dark:bg-neutral-900/[0.6] rounded-2xl",inner:"",tags:{title:"flex flex-wrap justify-center",clear:"mt-3 text-lg px-3 border border-oma-red-500 bg-oma-red-600 hover:bg-oma-red-500 hover:border-oma-red-600 text-white dark:border-oma-red-500 dark:bg-oma-red-600 dark:hover:bg-oma-red-500 dark:hover:border-oma-red-600 dark:text-white rounded-3xl",list:"inline-block overflow-hidden hover:scale-105 duration-200 ease-in-out rounded-3xl text-lg cursor-pointer px-3 mx-2 mt-4 hover:shadow-xl hover:shadow-primary/[0.3] border border-primary dark:text-white dark:border-primary dark:shadow-primary/[0.3]"},header:"",title:"pt-6 text-3xl font-extrabold text-center dark:text-gray-200",subtitle:"pb-6 text-xl font-semibold text-gray-600 dark:text-gray-400 -mt-8 text-center",text:"pb-16 text-center font-light dark:text-gray-400",base:"justify-between flex flex-wrap",gap:"gap-0",default:{}},Z={class:"flex justify-center"},ee=["onClick"],te={class:"flex justify-center mt-5"},me=R({__name:"sh-list-cards",props:{ui:{default:()=>({})},title:{default:""},subtitle:{default:""},text:{default:""},cols:{default:x.default.cols},class:{default:void 0},description:{default:""},cardID:{},allTags:{}},async setup(z){let g,y;const u=z,{ui:a,attrs:re}=W("sh-list-cards",C(u,"ui"),x,C(u,"class")),m=h(0),w=()=>{m.value=window.innerWidth};F(()=>{m.value=window.innerWidth,window.addEventListener("resize",w)}),M(()=>{window.removeEventListener("resize",w)});const A=I(()=>{const t=u.cols??x.default.cols;return m.value>=1300?["grid",Y.gridCols[t]].join(" "):m.value<640?["grid","grid-cols-1"].join(" "):m.value>640&&m.value<980?["grid","grid-cols-2"].join(" "):["grid","grid-cols-3"].join(" ")}),_=G();[g,y]=H(()=>J(`docs-${_.path}`,()=>E(_.path).findOne())),g=await g,y();const p=h([]),b=h([]),l=h([]),S=async()=>(await E("news/articles").where({cardID:{$in:u.cardID}}).find()).sort((i,n)=>u.cardID.indexOf(i.cardID)-u.cardID.indexOf(n.cardID)),U=()=>{if(p.value.length>0){const t=new Set;p.value.forEach(i=>{var n;(n=i.tags)==null||n.forEach(s=>{s!==null&&s.length>0&&t.add(s)})}),b.value=Array.from(t)}else b.value=[]},$=async()=>{p.value=await S(),U()},N=I(()=>l.value.length===0?p.value:p.value.filter(t=>{var n;let i=!1;return(n=t.tags)==null||n.forEach(s=>{s!==null&&s.length>0&&l.value.includes(s)&&(i=!0)}),i})),V=t=>{l.value.includes(t)?l.value=l.value.filter(i=>i!==t):l.value.push(t)},q=()=>{l.value=[]};return $(),(t,i)=>{const n=P,s=Q,O=X;return c(),f("div",{class:o(e(a).wrapper)},[d("div",{class:o(e(a).inner)},[d("h3",{class:o(e(a).tags.title)},"Tags",2),d("div",Z,[(c(!0),f(L,null,D(e(b),r=>(c(),f("span",{key:r,onClick:k=>V(r),class:o([e(a).tags.list,{"bg-primary-300 border-primary-400 text-neutral-600 dark:bg-primary-700 dark:border-primary-600 dark:hover:shadow-primary/[0.1]":e(l).includes(r)}])},[j(K(r)+" ",1),e(l).includes(r)?(c(),B(n,{key:0,name:"i-line-md:close-circle",dynamic:"",class:"hover:text-gray-500 duration-100"})):T("",!0)],10,ee))),128))]),d("div",te,[e(l).length?(c(),f("button",{key:0,onClick:q,class:o(e(a).tags.clear)},[j(" Clear All "),v(n,{name:"i-line-md:filter-remove-twotone",dynamic:"",class:"animate-pulse"})],2)):T("",!0)])],2),d("div",{class:o(e(a).header)},[d("div",{class:o(e(a).title)},[v(s,{value:t.title},null,8,["value"])],2),d("div",{class:o(e(a).subtitle)},[v(s,{value:t.subtitle},null,8,["value"])],2),d("div",{class:o(e(a).text)},[v(s,{value:t.text},null,8,["value"])],2)],2),d("div",{class:o([e(a).base,e(a).gap,e(A)])},[(c(!0),f(L,null,D(e(N),(r,k)=>(c(),B(O,{key:k,title:r.title,subtitle:r.subtitle,excerpt:r,urlImage:r.urlImage,urlUpperBase:r._path,article:r._path,leftLabel:r.leftLabel,rightLabel:r.rightLabel,centerLabel:r.centerLabel},null,8,["title","subtitle","excerpt","urlImage","urlUpperBase","article","leftLabel","rightLabel","centerLabel"]))),128))],2)],2)}}});export{me as default};
